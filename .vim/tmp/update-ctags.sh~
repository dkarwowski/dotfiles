#!/bin/bash
if [ -f '.gitignore' ]; then
    if [ -f '.srclist' ]; then
        ctags -R --exclude=".git" -L .srclist
    else
        ctags -R --exclude=".git" .
    fi
else
    HERE=$PWD
    cd ..
    if [ "$PWD" = "$HERE" ]; then
        echo "error: reached root dir"
        exit 1
    fi
    exec "$0"
fi
