import re

lights = [[0]*1000 for x in xrange(1000)]

def reorder(x1, x2):
    t1 = min(int(x1), int(x2))
    t2 = max(int(x1), int(x2))
    return (t1, t2)

def change(groups):
    (a, x1, y1, x2, y2) = groups

    def change_help(new_val, x1, y1, x2, y2):
        (x1, x2) = reorder(x1, x2)
        (y1, y2) = reorder(y1, y2)
        for x in xrange(x1,x2+1):
            for y in xrange(y1, y2+1):
                lights[x][y] += new_val
                lights[x][y] = 0 if lights[x][y] < 1 else lights[x][y]

    if a == "turn off ":
        change_help(-1, *groups[1:])

    if a == "turn on ":
        change_help(1, *groups[1:])

    if a == "toggle ":
        change_help(2, *groups[1:])


if __name__=="__main__":
    with open("day6.txt") as in_file:
        for i in in_file:
            m = re.match(r"^([a-z ]*)(\d+).(\d+)[a-z ]*(\d+).(\d+)$", i.strip('\n'))
            change(m.groups())

    tot = 0
    for i in lights:
        for x in i:
            tot += 1 if x else 0

    print tot
